import{c as l,r as n,j as e,B as A,s as S,A as X,S as _,n as P,b as E,d as g,g as L,e as M}from"./index-CXO53k2l.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],R=l("ChevronLeft",I);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],W=l("Eye",q);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],D=l("Lock",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],G=l("Mail",T),V=({onBack:f,onComplete:b,language:y})=>{const[a,d]=n.useState("signin"),[u,w]=n.useState(""),[i,j]=n.useState(""),[x,p]=n.useState(!1),[h,o]=n.useState(""),[v,N]=n.useState(!1),t=(s,r)=>y==="fr"?r:s,k=s=>s instanceof Error&&"code"in s&&typeof s.code=="string",C=s=>{if(k(s))switch(s.code){case"invalid_credentials":return t("Invalid phone/email or password.","Telephone/email ou mot de passe invalide.");case"registration_conflict":return t("An account already exists for this phone/email.","Un compte existe deja pour ce telephone/email.");case"validation_error":return t("Please check your details and try again.","Verifiez vos informations et reessayez.");case"storage_unavailable":return t("Registration storage is temporarily unavailable. Please retry shortly.","Le stockage des inscriptions est temporairement indisponible. Reessayez bientot.");case"configuration_error":case"auth_unavailable":return t("Authentication service is temporarily unavailable. Please retry.","Service d'authentification temporairement indisponible. Reessayez.");case"callback_error":return t("Unable to complete sign in right now. Please retry.","Connexion impossible pour le moment. Reessayez.");case"access_denied":return t("Access denied for this account.","Acces refuse pour ce compte.");default:return t("Authentication failed. Please try again.","Echec d'authentification. Reessayez.")}if(s instanceof Error){const r=s.message.replace(/^Error:\s*/,"").trim();if(r&&!/^<!doctype/i.test(r)&&!/^<html/i.test(r))return r}return t("Authentication failed. Please try again.","Echec d'authentification. Reessayez.")},z=async()=>{var m;const s=((m=P(u))==null?void 0:m.value)??"";if(!s||!i){o(t("Phone/email and password are required.","Telephone/email et mot de passe requis."));return}p(!0),o("");let r=!1;try{a==="signup"?(await E(s,i),r=!0,await g(s,i,{maxAttempts:6,retryDelayMs:500})):await g(s,i);const c=await L();if(!(c!=null&&c.user))throw new M("unknown_error",t("Unable to start a session.","Impossible de demarrer la session."),{retryable:!0});b()}catch(c){a==="signup"&&r?(d("signin"),o(t("Account created. Automatic sign in took too long. Please sign in in a few seconds.","Compte cree. La connexion automatique a pris trop de temps. Connectez-vous dans quelques secondes."))):o(C(c))}finally{p(!1)}};return e.jsxs("div",{className:"flex flex-col h-full bg-[#f9fafb] p-8 overflow-y-auto no-scrollbar",children:[e.jsx("button",{onClick:f,className:"p-2 -ml-4 self-start text-gray-700",children:e.jsx(R,{size:24})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-[320px] mx-auto w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-white border border-[#e7eef4] rounded-2xl flex items-center justify-center mb-8 shadow-lg mx-auto",children:e.jsx(A,{size:40})}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:a==="signin"?t("Welcome Back","Bon retour"):t("Join the Network","Rejoignez le reseau")}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 leading-relaxed",children:a==="signin"?t("Access the African Data Layer portal for infrastructure and pricing.","Accedez au portail African Data Layer pour les donnees d'infrastructure et de prix."):t("Create an account to contribute data and earn XP rewards.","Creez un compte pour contribuer et gagner des recompenses XP.")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("button",{onClick:()=>S(),className:"w-full h-12 bg-white border border-gray-100 rounded-xl text-[10px] font-bold uppercase tracking-widest text-[#0f2b46] shadow-sm hover:bg-gray-50 transition-all",children:t("Continue with Google","Continuer avec Google")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest px-1",children:t("Phone or email","Telephone ou email")}),e.jsxs("div",{className:"relative group",children:[e.jsx(G,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-[#0f2b46] transition-colors"}),e.jsx("input",{type:"text",placeholder:t("+2376XXXXXXXX or name@email.com","+2376XXXXXXXX ou nom@email.com"),value:u,onChange:s=>w(s.target.value),className:"w-full h-14 bg-white border border-gray-100 rounded-xl pl-12 pr-4 text-sm focus:border-[#0f2b46] focus:outline-none transition-all shadow-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:t("Password","Mot de passe")}),a==="signin"&&e.jsx("button",{className:"text-[10px] font-bold text-[#0f2b46] uppercase",children:t("Forgot?","Oublie ?")})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(D,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-[#0f2b46] transition-colors"}),e.jsx("input",{type:v?"text":"password",placeholder:t("Min. 8 characters","Min. 8 caracteres"),value:i,onChange:s=>j(s.target.value),className:"w-full h-14 bg-white border border-gray-100 rounded-xl pl-12 pr-12 text-sm focus:border-[#0f2b46] focus:outline-none transition-all shadow-sm"}),e.jsx("button",{type:"button",onClick:()=>N(s=>!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",children:e.jsx(W,{size:18})})]})]}),e.jsxs("button",{onClick:z,disabled:x,className:"w-full h-14 bg-[#0f2b46] text-white rounded-xl font-bold uppercase text-xs tracking-widest shadow-lg flex items-center justify-center space-x-2 hover:bg-[#0b2236] active:scale-95 transition-all disabled:opacity-70",children:[e.jsx("span",{children:x?t("Working...","Traitement..."):a==="signin"?t("Sign In","Connexion"):t("Create Account","Creer un compte")}),e.jsx(X,{size:18})]}),h&&e.jsx("div",{className:"rounded-xl bg-red-50 border border-red-100 p-3 text-[10px] font-semibold uppercase tracking-widest text-red-600 text-center",children:h})]}),e.jsxs("div",{className:"mt-8 text-center flex flex-col space-y-6 items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx(_,{size:12}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:t("Secure Encrypted Login","Connexion chiffree securisee")})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a==="signin"?t("Don't have an account? ","Pas de compte ? "):t("Already have an account? ","Vous avez deja un compte ? "),e.jsx("button",{onClick:()=>{d(a==="signin"?"signup":"signin"),o("")},className:"text-[#0f2b46] font-bold hover:underline",children:a==="signin"?t("Create an account","Creer un compte"):t("Sign in instead","Se connecter plutot")})]})]})]})]})};export{V as default};
